<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mainDao">
	
	<!-- 소속정보 및 권한 얻기 -->
	<select id="getUserBelongInfo" resultType="GPIDto" parameterType="String">
		SELECT /* 소속정보 및 권한 얻기  */
			CHURCH_CODE,
			GOD_PEOPLE_NAME,
			PART_NAME,
			SELL_NAME,
			ACCESS_LEVEL,
			VOLUN_PART_NAME,
			VOLUN_PART_SELL,
			ID
		FROM
			GOD_PEOPLE_INFO
		WHERE
			ID = #{id}
	</select>
	
	<!-- 교회정보겟 -->
	<select id="getChurchInfo" resultType="ChurchDto" parameterType="String">
		SELECT /* 교회정보 셀렉트 */
			CHURCH_NAME,
			CHURCH_IMG_PATH
		FROM
			CHURCH_INFO
		WHERE 
			CHURCH_CODE = #{code}
	</select>
	
	<!-- 소속부서 셀정보겟 -->
	<select id="getSellList" resultType="SellDto" parameterType="GPIDto">
		SELECT /* 소속부서 셀리스트 셀렉트*/
			PART_NAME,
			SELL_NAME,
			SELL_IMG_PATH
		FROM
			SELL_INFO
		WHERE
			CHURCH_CODE = #{church_code}
			AND PART_NAME = #{part_name}
	</select>
	
	<!-- 봉사부서 셀정보겟 -->
	<select id="getVolunSellList" resultType="SellDto" parameterType="GPIDto">
		SELECT /* 봉사부서 셀리스트 셀렉트 */
			PART_NAME,
			SELL_NAME,
			SELL_IMG_PATH
		FROM
			SELL_INFO
		WHERE
			CHURCH_CODE = #{church_code}
			AND PART_NAME = #{volun_part_name}
	</select>
	
	<!-- id의 셀정보 겟 -->
	<select id="getSellInfo" resultType="SellDto" parameterType="String">
		SELECT /* id의 셀정보 셀렉트*/
			SI.SELL_NAME,
			SI.SELL_LEADER_NAME,
			SI.SELL_IMG_PATH,
			SI.PART_NAME
		FROM
			SELL_INFO SI,
			GOD_PEOPLE_INFO GPI
		WHERE
			SI.CHURCH_CODE = GPI.CHURCH_CODE
			AND GPI.ID = #{id}
			AND SI.SELL_NAME = #{sell}
			AND SI.PART_NAME = #{part}
	</select>
	
	<!-- 셀원목록 -->
	<select id="getSellPeopleList" resultType="GPIDto" parameterType="String">
		SELECT /*셀원목록*/
			GOD_PEOPLE_NAME,
			BIRTHDAY
		FROM
			GOD_PEOPLE_INFO
		WHERE
			PART_NAME = #{part}
			AND SELL_NAME = #{sell}
			AND CHURCH_CODE = ( 
				SELECT
					CHURCH_CODE
				FROM
					GOD_PEOPLE_INFO
				WHERE 
					ID = #{id}
			)
	</select>
	
</mapper>